# åˆ†ç±»æŠ€æœ¯---äºŒåˆ†ç½‘ç»œä¸Šçš„é“¾è·¯é¢„æµ‹


## ä¸€ã€å®éªŒå†…å®¹

1. é‡‡ç”¨äºŒåˆ†ç½‘ç»œæ¨¡å‹ï¼Œå¯¹ml-1mæ–‡ä»¶å¤¹ä¸­çš„â€œç”¨æˆ·---ç”µå½±â€æ‰“åˆ†æ•°æ®è¿›è¡Œå»ºæ¨¡ï¼Œè€ƒè™‘å°†ç”¨æˆ·ä¿¡æ¯ã€ç”µå½±è¯¦ç»†ä¿¡æ¯ã€ä»¥åŠæ‰“åˆ†åˆ†å€¼ä½œä¸ºè¯¥ç½‘ç»œä¸Šçš„è¾¹ã€ç‚¹çš„æƒé‡ï¼›
2. æ ¹æ®ç½‘ç»œç»“æ„ç‰¹å¾ç»™å‡ºèŠ‚ç‚¹ç›¸ä¼¼æ€§åº¦é‡æŒ‡æ ‡ï¼›
3. åŸºäºç›¸ä¼¼æ€§åœ¨äºŒåˆ†ç½‘ç»œä¸Šè¿›è¡Œé“¾è·¯é¢„æµ‹ï¼›
4. é‡‡ç”¨äº¤å‰éªŒè¯çš„æ–¹æ³•éªŒè¯é¢„æµ‹ç»“æœï¼›
5. ç”»å‡ºROCæ›²çº¿æ¥åº¦é‡é¢„æµ‹æ–¹æ³•çš„å‡†ç¡®æ€§ã€‚

## äºŒã€é—®é¢˜åˆ†æåŠæ¨¡å‹è®¾è®¡

1. â€‹    æ•°æ®é›†çš„ç”µå½±åºå·æ˜¯ä¸€ä¸ªå¤§èŒƒå›´çš„ç¨€ç–åºåˆ—ï¼Œè€ƒè™‘å°†ç”µå½±åºå·å’Œç”¨æˆ·åºå·åˆ†åˆ«å­˜å…¥ç‰¹å®šæ•°ç»„ï¼Œç”¨æ•°ç»„ä¸‹æ ‡å”¯ä¸€å¯¹åº”ç”µå½±åºå·å’Œç”¨æˆ·åºå·ï¼Œå¹¶ä»¥æ•°ç»„é•¿åº¦ä¸ºä¾æ®ï¼Œå»ºç«‹äºŒåˆ†ç½‘ç»œæ¨¡å‹

2. â€‹    å°†æ•°æ®åˆ†ä¸ºè®­ç»ƒé›†90%ä¸æµ‹è¯•é›†10%

3. â€‹    åˆ©ç”¨è®­ç»ƒé›†è®¡ç®—æ¯ä¸ªç”¨æˆ·çœ‹è¿‡å¤šå°‘ç”µå½±å’Œæ¯ä¸ªç”µå½±è¢«å¤šå°‘ç”¨æˆ·çœ‹è¿‡ï¼Œç»“æœåˆ†åˆ«æ”¾å…¥ä¸¤ä¸ªæ•°ç»„

4. â€‹    åˆ©ç”¨è®­ç»ƒé›†çŸ©é˜µå’Œåˆ†åˆ«å­˜æ”¾æ¯ä¸ªç”¨æˆ·çœ‹è¿‡ç”µå½±æ•°é‡å’Œå­˜æ”¾æ¯ä¸ªç”µå½±çœ‹è¿‡çš„ç”¨æˆ·æ•°é‡

   çš„æ•°ç»„ï¼ŒæŒ‰ç…§å…¬å¼ï¼š
   $$
   w_{ij}=\frac{1}{k_j}\sum_{l=1}^m\frac{a_{il}a_{jl}}{k_l}
   $$
   è®¡ç®—å‡ºå¯¹åº”çš„èµ„æºé…ç½®çŸ©é˜µ**W**

   â€‹	åœ¨ä¸Šé¢å…¬å¼ä¸­ï¼Œç”µå½± j ä¸ç”µå½± i çš„å…´è¶£å…³è”åº¦ğ‘¤ğ‘–ğ‘—æ˜¾ç„¶åº”è¯¥ä¸kğ‘—å’Œ ğ‘˜ğ‘™å‘ˆåæ¯”ã€‚å¯¹äºkğ‘—å€¼ï¼Œå½“ç”µå½± j è¢«å¾ˆå¤šäººè¯„ä»·è¿‡æ—¶ï¼Œé‚£ä¹ˆè¿™å¯èƒ½å°±æ˜¯ ä¸ªæ³›åŒ–çš„çƒ­é—¨äº§å“ï¼ŒæŸç”¨æˆ·é€‰æ‹©äº†ç”µå½± j å¹¶ä¸æ„å‘³ç€ä»–æœ‰å¼ºçƒˆçš„é€‰æ‹© ç”µå½± i çš„å€¾å‘ã€‚åŒç†ï¼Œå¯¹äºğ‘˜ğ‘™å€¼ï¼Œç”¨æˆ· l çœ‹äº†éå¸¸å¤šçš„ç”µå½±ï¼Œé‚£ä¹ˆä»–é€‰ æ‹©äº†äº§å“ jï¼Œä¹Ÿå¹¶ä¸æ„å‘³ç€ä»–å¯¹äº§å“ j éå¸¸çš„ä¸“æ³¨ï¼Œç›¸åº”çš„æ¨èåº¦ä¹Ÿå°±ä¸ä¼šå¾ˆé«˜ã€‚ 

5. â€‹    ç›®æ ‡ç”¨æˆ·çš„èµ„æºåˆ†é…çŸ¢é‡fã€‚åˆå§‹æ—¶ï¼Œå°†ä»–é€‰æ‹©è¿‡çš„ç”µå½±å¯¹åº”é¡¹èµ„æºè®¾ç½®ä¸º1ï¼Œå…¶ä»–ä¸º0ï¼Œå¾—åˆ°åˆå§‹nç»´0/1å‘é‡ã€‚æŒ‰ä¸€ä¸‹å…¬å¼è®¡ç®—èµ„æºåˆ†é…çŸ¢é‡:
   $$
   f^{'}=Wf
   $$
   å¹¶è¿›è¡Œæ•°ç»„æ’åº

   â€‹	fâ€²çŸ©é˜µä¸­ç¬¬ m åˆ—ä¸ºå¯¹ç”¨æˆ· m çš„ç”µå½±æ¨èå‘é‡ï¼Œæ’åºåæŠŠå¾—åˆ†æœ€é«˜ çš„ä¸€éƒ¨åˆ†ç”µå½±å¯¹åº”æ¨èç»™ç”¨æˆ· mï¼Œå³å®Œæˆäº†ç”µå½±æ¨èå·¥ä½œã€‚ 

6. â€‹    éå†æµ‹è¯•é›†ï¼Œå¯¹ç»™å®šçš„ç”¨æˆ· iï¼Œå‡è®¾å…¶æœ‰ğ¿ğ‘–ä¸ªäº§å“æ˜¯æœªé€‰æ‹©çš„ï¼Œå¦‚æœåœ¨æµ‹ è¯•é›†ä¸­ç”¨æˆ· i é€‰æ‹©çš„ç”µå½± jï¼Œè€Œç”µå½± j ä¾æ®å‘é‡fâ€²è¢«æ’åœ¨ç¬¬ğ‘…ğ‘–ğ‘—ä½ï¼Œåˆ™è®¡ ç®—å…¶ç›¸å¯¹ä½ç½®ï¼š
   $$
   r_{ij}=\frac{R_{ij}}{L_i}
   $$
   
7. â€‹    å‡åŒ€é€‰å‡º 1â€”0.3 ä¹‹é—´çš„ 50 ä¸ªæ•°ä½œä¸ºé˜ˆå€¼ï¼Œè®¡ç®—æ¯ä¸ªé˜ˆå€¼å¯¹åº”çš„ TPï¼ˆåœ¨æ¨èé›†ä¸­ï¼Œç”¨æˆ·è¯„åˆ†å¤§äº 3ï¼‰ï¼Œ FPï¼ˆåœ¨æ¨èé›†ä¸­ï¼Œä½†ç”¨æˆ·è¯„åˆ†å° äºç­‰äº 3ï¼‰ï¼Œ FNï¼ˆä¸åœ¨æ¨èé›†ä¸­ï¼Œä½†ç”¨æˆ·è¯„åˆ†å¤§äº 3ï¼‰ï¼Œ TNï¼ˆä¸åœ¨æ¨è é›†ä¸­ï¼Œç”¨æˆ·è¯„åˆ†å°äºç­‰äº 3ï¼‰ã€‚æ®æ­¤è®¡ç®—å‡ºçœŸé˜³æ€§ç‡å’Œå‡é˜³æ€§ç‡ï¼Œå¹¶ç»˜ åˆ¶å‡º ROC æ›²çº¿

## ä¸‰ã€å…·ä½“å®ç°

1.æ•°æ®å¯¼å…¥

â€‹	å°†dataä¸­çš„ratings.datæ•°æ®åˆ©ç”¨pandasçš„read_csvå‡½æ•°å¯¼å…¥

```python
import pandas as pd
import numpy as np
filename = "datamining\\movie\\data\\ratings.dat"  
# rating.datæ–‡ä»¶è·¯å¾„ï¼Œæ ¹æ®æœ¬åœ°ä¿®æ”¹â†‘
all_ratings = pd.read_csv(filename, header=None, sep="::", names=["UserID",  "MovieID",  "Rating",  "Datetime"], engine="python")

```

2.æ•°æ®å¤„ç†

â€‹	åˆ©ç”¨éšæœºæ•°ç»™å·²è¯»å…¥çš„æ•°æ®æ·»åŠ â€œclassâ€å±æ€§ï¼Œæ•°å€¼ä¸º1-9ï¼Œæ–¹ä¾¿å¯¹äºæ•°æ®çš„æµ‹è¯•é›†å’Œè®­ç»ƒé›†çš„åˆ†ç±»æ“ä½œï¼ŒåŒæ—¶æ·»åŠ Favoriteå±æ€§ï¼Œå€¼ä¸ºâ€œTrueâ€æˆ–â€œFalseâ€ï¼Œç”¨äºæ ‡è®°ç”¨æˆ·æ˜¯å¦å–œæ¬¢ç”µå½±(åˆ†æ•°>3è®°ä¸ºå–œæ¬¢)

```python
# 2ã€å¯¹æ•°æ®è¿›è¡Œé¢„å¤„ç†
all_ratings["Favorable"] = all_ratings["Rating"] > 3.0	
# å°†åˆ†æ•°>3è§†ä¸ºç”¨æˆ·å–œæ¬¢æ­¤ç”µå½±
# 3ã€éšæœºå°†æ•°æ®åˆ†ä¸ºè®­ç»ƒé›†ä¸æµ‹è¯•é›†
randum = np.random.rand(len(all_ratings), 1)
for i in range(len(randum)):
    randum[i] = int(randum[i]*10)
all_ratings["class"] = randum
# 4ã€å¯¼å…¥å‡½æ•°ã€æ•°æ®,é¢„å¤„ç†æ•°æ®ã€‚
all_ratings.to_csv('classified_ratings.csv')
MovieID_set = set(all_ratings["MovieID"])
MovieID_tuple = tuple(MovieID_set)
UserID_set = set(all_ratings["UserID"])
UserID_tuple = tuple(UserID_set)
M = len(UserID_set)             # ç”¨æˆ·æ•°é‡
N = len(MovieID_set)            # ç”µå½±æ•°é‡
values = range(N)
MovieID_dict = dict(zip(MovieID_tuple,  values))    # æŠŠMovieIDä»å°åˆ°å¤§é€ä¸€æ˜ å°„
all_ratings = pd.read_csv('classified_ratings.csv',
                          usecols=[1, 2, 5, 6])

```

é¢„å¤„ç†å®Œæ¯•åçš„æ•°æ®ä¿å­˜åœ¨â€œclassified_ratings.csvâ€ä¸­ï¼Œé¢„å¤„ç†ä¹‹åçš„æ ¼å¼ä¸º

![image-20200601233229231](C:\Users\67575\AppData\Roaming\Typora\typora-user-images\image-20200601233229231.png)

3.è®¡ç®—èµ„æºé…ç½®çŸ©é˜µ**W**	èµ„æºåˆ†é…çŸ¢é‡**F ** ä»¥åŠ	TP(çœŸé˜³æ€§ç‡)	FP(å‡é˜³æ€§ç‡)

**è®¡ç®—çŸ©é˜µF**

```python
# è®¡ç®—èµ„æºåˆ†é…çŸ¢é‡F
def computeF():
    F = []
    for x in range(M):
        index = UserID_tuple[x]     # index = Uid
        reviews_set = set(reviews_by_users[index])   # ç”¨æˆ·çœ‹è¿‡çš„æ‰€æœ‰ç”µå½±midé›†åˆ
        reviews_set_modified = set()
        for t in reviews_set:
            reviews_set_modified.add(MovieID_dict[t])   # ç”¨æˆ·çœ‹è¿‡çš„ç”µå½±å¯¹åº”çš„ç´¢å¼•é›†åˆ
        for y in range(N):
            if y in reviews_set_modified:
                F.append(1)
            else:
                F.append(0)

    F = np.array(F).reshape((M, N)).transpose()

    return F
```

**è®¡ç®—çŸ©é˜µW**

â€‹	çŸ©é˜µ W ä¸ºä¸€ä¸ª n*n ç»´çš„çŸ©é˜µï¼Œåœ¨æ•°æ®é›†ä¸­ç”µå½±æ•° çº¦æœ‰ 10,000 ä¸ªï¼Œå¯ä»¥çœ‹å‡ºçŸ©é˜µ W è§„æ¨¡éå¸¸å¤§ï¼Œè‹¥æ˜¯å­˜å‚¨ä¸ºä¸€ä¸ªæ™®é€š çš„çŸ©é˜µå¾ˆå›°éš¾ã€‚ä½†æ˜¯å¯ä»¥çœ‹å‡ºå®ƒå…¶å®æ˜¯ä¸€ä¸ªç¨€ç–çŸ©é˜µï¼Œå³å…¶ä¸­æœ‰å¾ˆå¤š å…ƒç´ æ˜¯ 0ï¼Œæ‰€ä»¥æˆ‘åˆ©ç”¨äº†ç¨€ç–çŸ©é˜µçš„æ•°æ®ç»“æ„ï¼ŒæŠŠ W çŸ©é˜µåŒ–æˆç¨€ç–çŸ©é˜µçš„å½¢å¼æ¥å­˜å‚¨ã€‚

è€Œç”±åˆ†ææ˜“çŸ¥ï¼Œå½“ç”¨æˆ· l æ—¢ç»™ç”µå½± i è¯„è¿‡åˆ†ä¹Ÿç»™ç”µå½± j è¯„è¿‡åˆ†æ—¶ï¼Œ
æ±‚å’Œç¬¦å·å†…éƒ¨åˆ†å­ä¸º 1ï¼Œæ•…å‚ä¸æ±‚å’Œçš„æ•°åŒ–ä¸ºï¼š
$$
\frac{1}{k_lk_j}
$$
å‡å°‘è®¡ç®—é‡ï¼Œç®€åŒ–è®¡ç®—è¿‡ç¨‹

```python
	row = []
    col = []
    data = []
    keys_list = favor_reviews_by_users.keys()
# è®¡ç®—WçŸ©é˜µ
    for l in range(M):      # print "enter outer iteration %d" % l
        index = UserID_tuple[l]
        # print l
        if index in keys_list:
            #  movie_favoredï¼Œä¸´æ—¶tupleå˜é‡ï¼Œç”¨æ¥å­˜å‚¨ç”¨æˆ·æ‰€å–œæ¬¢çš„ç”µå½±,  leng å­˜å‚¨ç”¨æˆ·å–œæ¬¢ç”µå½±çš„ä¸ªæ•°
            movie_favored = tuple(favor_reviews_by_users[index])
            leng = len(movie_favored)    # è®­ç»ƒé›†ä¸­ç”¨æˆ·index=UserID_tupleè¯„åˆ†å¤§äº3çš„ç”µå½±
            # ; print "movie_favored number:%d" %leng
            kl = len(reviews_by_users[index])      #è¯¥ç”¨æˆ·æ€»è¯„ä»·çš„ç”µå½±æ•°é‡
            for x in range(leng):
                #  xä½ç½®çš„ç”µå½±IDï¼Œj ä¸ºè¯¥ç”µå½±åœ¨å¯¹ç…§è¡¨ä¸­çš„ä½ç½®
                mid = movie_favored[x]
                j = MovieID_dict[mid]
                kj = len(movie_reviewed[mid])   # è®­ç»ƒé›†ä¸­ç”µå½±jè¢«è¯„ä»·çš„æ€»æ¬¡æ•°
                for y in np.arange(x+1,  leng):
                    i = MovieID_dict[movie_favored[y]]  # yä½ç½®å¯¹åº”ç”µå½±çš„IDï¼Œå»æ£€ç´¢ï¼Œå¾—åˆ°è¯¥IDå¯¹åº”çš„ç´¢å¼•
                    ki = len(movie_reviewed[movie_favored[y]])  

                    row.append(i)
                    col.append(j)
                    data.append(1.0/kl/kj)
                    # è¡Œåˆ—åè½¬ï¼Œé¡ºåŠ¿è®¡ç®—å¯¹ç§°ä½ç½®ä¸Šçš„W[i][j]
                    row.append(j)
                    col.append(i)
                    data.append(1.0/kl/ki)

    row = np.array(row)
    col = np.array(col)
    data = np.array(data)
    W = sparse.coo_matrix((data,  (row, col)),  shape=(N, N),  dtype=float)     # ä½¿ç”¨ç¨€ç–çŸ©é˜µå¯¹Wè¿›è¡Œå­˜å‚¨
    print("WçŸ©é˜µ:\n", W)
```

**è®¡ç®—Fâ€˜åŠå…¶ä¿®æ­£(ä»£ç ä¸­è®°ä¸ºF2)**

â€‹	åˆ©ç”¨çŸ©é˜µWä¸çŸ©é˜µFçš„ç‚¹ä¹˜æ³•è®¡ç®—F2ï¼ŒåŒæ—¶è€ƒè™‘æ¨èç®—æ³•ä¸æ¨èç”¨æˆ·å·²çœ‹è¿‡çš„ç”µå½±ï¼Œæ‰€ä»¥è¿›ä¸€æ­¥å¤„ç†å°†ç”¨æˆ·å·²çœ‹è¿‡çš„å¹¶è¯„åˆ†çš„é¡¹ç½®0

```python
#  è®¡ç®—FçŸ©é˜µ, shape=(Nï¼ŒM),  å­˜æ”¾ç”¨æˆ·çœ‹è¿‡é‚£äº›ç”µå½±
    F = computeF()
    print("F:\n", F)

    F2 = W.dot(F)
    print("F2çŸ©é˜µä¸º:\n", F2)

#  ä¿®æ­£F2çŸ©é˜µï¼Œå½’é›¶é‚£äº›ç”¨æˆ·å·²ç»çœ‹è¿‡çš„ç”µå½±
    for i in range(M):
        slic = F[:,  i]
        for j in range(N):
            if slic[j] == 1:
                F2[j][i] = 0
    print("F2 have modified")
    print(F2)
```

**è®¡ç®—RçŸ©é˜µå¹¶è®¡ç®—rçš„å‡å€¼**

```python
def calculate_r():
    global sort_result
    global test_by_users
    global M
    global N
    print("enter")
    sum = 0.0

    for i in range(M):
        index = UserID_tuple[i]     # uid
        if ((index in favor_in_test_by_users) == False):        # è¿™é‡Œçš„ == ä¸èƒ½æ”¹æˆ is ,ä¸‹é¢çš„ä¹Ÿä¸€æ ·ï¼Œpandasçš„é—®é¢˜ä¼šæŠ¥é”™
            # print "uid %d " % index
            continue
        mv_set = favor_in_test_by_users[index]
        slic_dict = dict(zip(sort_result[:, i],  range(N)))
        for m in mv_set:
            mindex = MovieID_dict[m]
            sum += slic_dict[mindex]+1
        sum = float(sum) / (N - len(reviews_by_users[index]))
#         print "sum=%f,  count=%d" % (sum,  i)
    return sum
#  è®¡ç®—r
    R = []
    r = calculate_r()
    R.append(r)
    print("r: %f" % r)
```

**ç»˜åˆ¶ROCæ›²çº¿(è®¡ç®—FPR TPR)**

â€‹	é€‰å– 1â€”0.5 ä¹‹é—´çš„ 50 ä¸ªæ•°ä½œä¸ºé˜ˆå€¼ï¼Œç»Ÿè®¡æµ‹è¯•é›†é‡Œæ¨èç»™ ç”¨æˆ·çš„ç”µå½±é›†ã€‚å¯¹æŸæ¡æµ‹è¯•é›†ä¸­çš„â€œç”¨æˆ·â€”ç”µå½±â€æ•°æ®ï¼Œè‹¥ç”¨æˆ· iä¸åœ¨ æµ‹è¯•é›†è¯„åˆ†å¤§äº 3 çš„é›†åˆä¸­ï¼Œç”µå½± mem åœ¨æ¨èé›†ä¸­ï¼Œåˆ™ FP+1ï¼›ç”µå½± mem ä¸åœ¨æ¨èé›†ä¸­ï¼Œåˆ™ TN+1ã€‚è‹¥ç”¨æˆ· i åœ¨æµ‹è¯•é›†è¯„åˆ†å¤§äº 3 çš„é›†åˆ ä¸­ï¼Œç”µå½± memåœ¨æ¨èé›†ä¸­ä¸”è¯„åˆ†å¤§äº 3ï¼Œåˆ™ TP+1ï¼›ç”µå½± mem åœ¨æ¨è é›†ä¸­ä½†è¯„åˆ†å°äºç­‰äº 3ï¼Œåˆ™ FP+1ï¼›ç”µå½± mem ä¸åœ¨æ¨èé›†ä¸­ä½†è¯„åˆ†å¤§ äº 3ï¼Œåˆ™ FN+1ï¼›ç”µå½± mem ä¸åœ¨æ¨èé›†ä¸­ä¸”è¯„åˆ†å°äºç­‰äº 3ï¼Œåˆ™ TN+1ã€‚ è®¡ç®—å‡ºç›¸åº”çš„ TPR å’Œ FPRï¼Œåˆ©ç”¨ matplotlib ä¸­çš„å‡½æ•°æ¥ç»˜åˆ¶ ROC æ›²çº¿ï¼Œåº¦é‡è¯¥æ–¹æ³•é¢„æµ‹çš„å‡†ç¡®æ€§

```python
#  ç»˜åˆ¶ROCæ›²çº¿æ‰€éœ€ç›¸å…³å‚æ•°
#  è®¡ç®—TPã€FP
    TPR = []
    FPR = []
    area = []
    TP = 0      # åœ¨æ¨èé›†ä¸­ï¼Œå®é™…ä¹Ÿç»™äº†å¥½è¯„
    FN = 0      # ä¸åœ¨æ¨èé›†ä¸­ï¼Œå®é™…å´ç»™äº†å¥½è¯„
    FP = 0      # åœ¨æ¨èé›†ä¸­ï¼Œå®é™…ç»™äº†å·®è¯„
    TN = 0      # ä¸åœ¨æ¨èé›†ä¸­ï¼Œå®é™…ç»™äº†å·®è¯„

    #  ä¸ºæ¯ä¸ªç”¨æˆ·é€‰å–æ¨èä¸€å®šæ¯”ä¾‹çš„ç”µå½±çš„ç”µå½±
    recommend_rate = np.linspace(0.001, 0.5, 50)    #è®¾ç½®é˜ˆå€¼åœ¨1-0.5ä¹‹é—´çš„50ä¸ªå€¼
    for rate in recommend_rate:
        recommend_dict = recommend(rate)

        for uid,  reviews in test_by_users.items():
            recommend_movies = recommend_dict[uid]
            if ((uid in favor_in_test_by_users) == False):
                # print "uid = %d" % uid
                for m in reviews:
                    if m in recommend_movies:
                        FP += 1
                    else:
                        TN += 1
                continue
            for m in reviews:
                if m in recommend_movies and m in favor_in_test_by_users[uid]:
                    TP = TP + 1
                elif m in recommend_movies and m not in favor_in_test_by_users[uid]:
                    FP = FP + 1
                elif m not in recommend_movies and m in favor_in_test_by_users[uid]:
                    FN = FN + 1
                else:
                    TN = TN + 1

        TPR.append(float(TP)/(TP+FN))
        FPR.append(float(FP)/(FP+TN))
        area.append(float(TP)/(TP+FN) * (1-float(FP)/(FP+TN)))

    best_index = int(np.argmax(np.array(area)))
```

```python
#  ç”»å›¾
    plt.figure(1)
    plt.plot(FPR,  TPR,  'bx',  linewidth=20)
    plt.plot(np.linspace(0, 1, 200),  np.linspace(0, 1, 200),  'r--', )
    plt.xlabel('FPR rate')
    plt.ylabel("TPR rate")
    plt.scatter(FPR, TPR, linewidths=3, s=3, c='b')
    plt.legend(("points with changing recommend rate", "reference curve"))
    title = "ROC Curve"
    plt.title(title)
    f1 = plt.gcf()
    plt.show()
```



## å››ã€å®éªŒç»“æœ

**WçŸ©é˜µ**

![image-20200601235139011](C:\Users\67575\AppData\Roaming\Typora\typora-user-images\image-20200601235139011.png)

**FçŸ©é˜µ&&F2çŸ©é˜µ**

![image-20200601235209244](C:\Users\67575\AppData\Roaming\Typora\typora-user-images\image-20200601235209244.png)

![image-20200601235456624](C:\Users\67575\AppData\Roaming\Typora\typora-user-images\image-20200601235456624.png)

**rå€¼**

æœ¬æ¬¡rå€¼ä¸º: 0.845882

*ç”±äºæ¯æ¬¡çš„è®­ç»ƒä¸æµ‹è¯•é›†ä¸ä¸€æ ·æ‰€ä»¥ **r** å€¼ä¸å”¯ä¸€

**ROC_Curve**

![](C:\Users\67575\Desktop\HomeWork\datamining\åˆ†ç±»æŠ€æœ¯---äºŒåˆ†ç½‘ç»œä¸Šçš„é“¾è·¯é¢„æµ‹\ROC_Curve.png)

## äº”ã€å®éªŒå¿ƒå¾—

â€‹	é€šè¿‡æœ¬æ¬¡å®éªŒæˆ‘æ›´å¥½çš„å­¦ä¹ äº†æ•°æ®æŒ–æ˜çš„åŸºç¡€çŸ¥è¯†ï¼ŒåŒæ—¶å®è·µäº†pythonä¸­numpyåº“ä¸pandasåº“ä¸­çš„å„ç§è¯¥å‡½æ•°ï¼Œæé«˜äº†è‡ªå·±çš„åŠ¨æ‰‹èƒ½åŠ›ä¸å®è·µèƒ½åŠ›ï¼Œæ›´å¥½çš„äº†è§£äº†æ•°æ®æŒ–æ˜çŸ¥è¯†çš„åº”ç”¨é¢†åŸŸä¸æ–¹æ³•ï¼Œåœ¨å®éªŒè¿‡ç¨‹ä¸­ä¸€å¼€å§‹æ²¡æœ‰è€ƒè™‘åˆ°æœ¬å®éªŒè¾ƒå¤§çš„æ•°æ®é‡ï¼Œç›´æ¥é‡‡ç”¨çŸ©é˜µå­˜å‚¨ä¼šçˆ†ç‚¸ï¼Œç»è¿‡å­¦ä¹ æ”¹ç”¨ç¨€ç–çŸ©é˜µå­˜å‚¨ï¼ŒåŒæ—¶åœ¨æ•°æ®å¤„ç†å’Œè¯»å…¥çš„è¿‡ç¨‹ä¸­ç»å¸¸å¯¼è‡´ç”±äºç®—åŠ›ä¸è¶³é€ æˆå„ç§é—®é¢˜ï¼Œç»™debugå·¥ä½œä¹Ÿé€ æˆäº†ä¸€å®šçš„å›°éš¾ï¼ŒåŒæ—¶æˆ‘çš„äºŒåˆ†ç±»æ¨¡å‹å¹¶ä¸æ˜¯ååˆ†ä¼˜ç§€ï¼ŒROCæ›²çº¿æ˜¾ç„¶æ€§èƒ½éå¸¸ä¸€èˆ¬ï¼Œå¸Œæœ›åœ¨ä»Šåçš„å­¦ä¹ ä¸­å¯ä»¥æ›´å¥½çš„æé«˜è‡ªå·±
